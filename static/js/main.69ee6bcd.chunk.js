(this["webpackJsonpflickr-photo-stream"]=this["webpackJsonpflickr-photo-stream"]||[]).push([[0],{17:function(e,t,n){},19:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(4),c=n.n(o),s=(n(17),n(5)),l=n.n(s),i=n(6),h=n(7),d=n(8),u=n(2),g=n(12),m=n(11),x=n(9),p=n(10),b="https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=".concat("9f7d0ad0ef2a216d9506553da2af4a7a","&media=photos&content_type=1&sort=relevance&extras=description%2C+owner_name%2C+tags%2C+icon_server%2C+url_m&format=json&nojsoncallback=1"),j=function(e,t,n){var a="".concat(b,"&text=").concat(e,"&safe_search=").concat(t,"&page=").concat(n);return console.debug("Calling API: ".concat(a)),fetch(a).then((function(e){return e.json()})).catch((function(e){return e}))},f=(n(19),n(20),n(0)),w=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).getMorePhotos=function(){a.setState({page:a.state.page+1},a.getPhoto)},a.getPhoto=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(a.state.text,a.state.safeSearch,a.state.page);case 2:if((t=e.sent)instanceof Error)a.throwError(t);else try{a.setState({totalPages:t.photos.pages,photos:a.state.photos.concat(t.photos.photo)})}catch(n){a.throwError(n)}case 4:case"end":return e.stop()}}),e)}))),a.state={text:"holiday",safeSearch:1,page:1,totalPages:1/0,photos:[],error:null},a.handleChange=a.handleChange.bind(Object(u.a)(a)),a.handleKeyPress=a.handleKeyPress.bind(Object(u.a)(a)),a.handleClick=a.handleClick.bind(Object(u.a)(a)),a.getMorePhotos=a.getMorePhotos.bind(Object(u.a)(a)),a.getPhoto=a.getPhoto.bind(Object(u.a)(a)),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.getPhoto()}},{key:"handleChange",value:function(e){"safesearch"===e.target.id&&(console.debug("SafeSearch value"+e.target.value),this.setState({safeSearch:e.target.value,page:1,photos:[],error:null},this.getPhoto)),"text"===e.target.id&&this.setState({text:e.target.value})}},{key:"handleKeyPress",value:function(e){"Enter"===e.key&&this.newSearch(e.target.value)}},{key:"handleClick",value:function(e){"reload"===e.target.id?window.location.reload(!0):this.newSearch(e.target.value)}},{key:"newSearch",value:function(e){this.setState({text:e,page:1,photos:[],error:null},this.getPhoto)}},{key:"throwError",value:function(e){console.error(e.message),this.setState({error:e})}},{key:"render",value:function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("div",{className:"container my-12 mx-auto px-4 md:px-12",children:[Object(f.jsx)("h1",{className:"text-4xl md:text-6xl text-black font-display py-2",children:"Flickr Phohto Stream"}),Object(f.jsx)(v,{safeSearch:this.state.safeSearch,onChange:this.handleChange,onKeyPress:this.handleKeyPress,text:this.state.text}),Object(f.jsx)(k,{photos:this.state.photos,page:this.state.page,totalPages:this.state.totalPages,next:this.getMorePhotos,onClick:this.handleClick,error:this.state.error})]})})}}]),n}(r.a.Component),v=function(e){return Object(f.jsxs)("div",{className:"flex flex-wrap py-3",children:[Object(f.jsx)("div",{className:"w-1/12 md:w-2/6 lg:w-1/6 mb-1 md:mb-0",children:Object(f.jsx)(O,{safeSearch:e.safeSearch,onChange:e.onChange})}),Object(f.jsx)("div",{className:"w-0 md:w-2/6 lg:w-3/6"}),Object(f.jsx)("div",{className:"w-11/12 md:w-2/6",children:Object(f.jsx)(y,{text:e.text,onChange:e.onChange,onKeyPress:e.onKeyPress})})]})},O=function(e){return Object(f.jsxs)("div",{className:"relative",children:[Object(f.jsxs)("select",{className:"block appearance-none w-1 md:w-full bg-white border border-gray-200 text-gray-700 text-sm py-3 px-4 md:pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"safesearch",role:"list",value:e.safeSearch,onChange:e.onChange,children:[Object(f.jsx)("option",{value:"1",children:"SafeSearch on"}),Object(f.jsx)("option",{value:"2",children:"SafeSearch moderate"}),Object(f.jsx)("option",{value:"3",children:"SafeSearch off"})]}),Object(f.jsx)("div",{className:"pointer-events-none absolute inset-y-0 md:right-0 flex items-center px-2 text-gray-700",children:Object(f.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:Object(f.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})},y=function(e){return Object(f.jsx)("input",{className:"appearance-none block w-full bg-white border border-gray-200 text-gray-700 text-sm rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"text",type:"text",role:"search",placeholder:"tags, title and / or description",value:e.text,onChange:e.onChange,onKeyPress:e.onKeyPress})},k=function(e){return Object(f.jsx)(x.a,{dataLength:e.photos.length,next:e.next,hasMore:e.page<e.totalPages,loader:Object(f.jsx)(C,{error:e.error,onClick:e.onClick}),endMessage:Object(f.jsx)(N,{}),className:"flex flex-wrap -mx-1 lg:-mx-4",children:e.photos.map((function(t,n){return Object(f.jsx)(S,{photo:t,onClick:e.onClick},n)}))})},C=function(e){return e.error?Object(f.jsxs)("div",{className:"flex items-center justify-center bg-red-200 text-red-700 text-center w-full m-1 lg:m-4 py-4 rounded-lg",children:[Object(f.jsx)("h4",{className:"w-full align-middle",role:"alert",children:e.error.message}),Object(f.jsx)("button",{id:"reload",className:"w-auto text-white text-sm bg-red-900 hover:bg-red-700 mx-2 px-2 py-2 rounded-lg",onClick:e.onClick,children:"Reload"})]}):Object(f.jsx)("h4",{className:"animate-pulse bg-gray-200 text-center w-full m-1 lg:m-4 py-4 rounded-lg",children:"Loading..."})},N=function(e){return Object(f.jsx)("p",{className:"text-center\tfont-bold text-4xl text-gray-500 w-full m-8",children:"Yay! You have seen it all!"})},S=function(e){var t=e.photo.title?e.photo.title:"No title",n="https://www.flickr.com/photos/".concat(e.photo.owner,"/").concat(e.photo.id);return Object(f.jsx)("div",{className:"my-1 px-1 w-full md:w-1/2 lg:my-4 lg:px-4 lg:w-1/3 xl:w-1/4",children:Object(f.jsxs)("div",{className:"overflow-hidden rounded-lg shadow-lg pb-2 md:pb-4",children:[Object(f.jsx)(P,{title:t,photoURL:n,imgSrc:e.photo.url_m}),Object(f.jsx)(L,{title:t,photoURL:n}),Object(f.jsx)(_,{owner:e.photo.owner,ownername:e.photo.ownername,iconfarm:e.photo.iconfarm,iconserver:e.photo.iconserver}),Object(f.jsx)(K,{content:e.photo.description._content.replace(/<[^>]+>/g,"")}),Object(f.jsx)(M,{tags:e.photo.tags,onClick:e.onClick})]})})},P=function(e){return Object(f.jsx)("a",{href:e.photoURL,target:"_blank",rel:"noreferrer",children:Object(f.jsx)("div",{className:"overflow-hidden flex items-center justify-center sm:h-full md:h-52 lg:h-44 w-full bg-gray-900",children:Object(f.jsx)(p.LazyLoadImage,{alt:e.title,src:e.imgSrc,className:"block overflow-hidden hover:opacity-80 sm:w-auto sm:h-full md:w-full md:h-auto text-white border-none",effect:"opacity"})})})},L=function(e){return Object(f.jsx)("div",{className:"pb-0 md:pb-0 p-2 md:p-4",children:Object(f.jsx)("p",{className:"text-lg truncate",children:Object(f.jsx)("a",{className:"no-underline hover:underline text-black",href:e.photoURL,target:"_blank",rel:"noreferrer",children:e.title})})})},_=function(e){var t="https://www.flickr.com/photos/".concat(e.owner,"/"),n=e.iconserver>0?"http://farm".concat(e.iconfarm,".staticflickr.com/").concat(e.iconserver,"/buddyicons/").concat(e.owner,".jpg"):"https://www.flickr.com/images/buddyicon.gif";return Object(f.jsx)("div",{className:"pb-0 md:pb-0 p-2 md:p-4",children:Object(f.jsxs)("a",{className:"flex items-center no-underline hover:underline text-black",href:t,target:"_blank",rel:"noreferrer",children:[Object(f.jsx)("img",{alt:e.ownername,className:"block w-8 h-8 rounded-full",src:n}),Object(f.jsx)("p",{className:"ml-2 text-sm truncate",children:e.ownername})]})})},K=function(e){return""===e.content.trim()?"":Object(f.jsx)("div",{className:"pb-0 md:pb-0 p-2 md:p-4",children:Object(f.jsx)("p",{className:"text-gray-500 text-sm overflow-y-scroll max-h-full md:max-h-20",children:e.content})})},M=function(e){var t=e.tags.split(" ");return t.length<=1?"":Object(f.jsx)("div",{className:"pb-0 md:pb-0 p-2 md:p-4",children:Object(f.jsx)("div",{className:"overflow-x-scroll max-h-full md:max-h-24",children:t.map((function(t,n){return Object(f.jsx)(E,{tag:t,onClick:e.onClick},n)}))})})},E=function(e){return Object(f.jsx)("button",{className:"mr-1 mb-1 p-2 rounded-lg text-xs bg-gray-200 inline-block text-black hover:bg-gray-600 hover:text-white",onClick:e.onClick,value:e.tag,children:e.tag})},F=w,R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))};c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(F,{})}),document.getElementById("root")),R()}},[[22,1,2]]]);
//# sourceMappingURL=main.69ee6bcd.chunk.js.map